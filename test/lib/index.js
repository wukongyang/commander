#!/usr/bin/env node
"use strict";require("fs"),require("fs");const e=require("single-line-log").stdout,s=require("chalk");class t{constructor(e={}){this.initConfig(e)}initConfig(e){const s={duration:100,current:0,block:"â–ˆ",showNumber:!0,tip:{0:"åŠªåŠ›æž„å»ºä¸­ðŸ”§â€¦â€¦",50:"åŠ è½½ä¸€åŠå•¦ï¼Œä¸è¦ç€æ€¥ðŸ¶â€¦â€¦",75:"é©¬ä¸Šå°±åŠ è½½å®Œäº†ðŸ˜Šâ€¦â€¦",100:"åˆ›å»ºå®ŒæˆðŸŽ†ðŸŽ‰,å¼€å§‹æ¬ç –å§ðŸ§±ðŸ˜Š"},color:"blue"};Object.assign(s,e),this.config=s}run(t){const{block:n,duration:r,tip:c,color:o,showNumber:i}=this.config,a=Object.keys(c).sort(((e,s)=>parseInt(s)-parseInt(e)));let l=c[0];const p=r/100,u=Math.floor(t/p);for(let e=0;e<a.length;e++)if(u>=parseInt(a[e])){l=c[a[e]];break}e(s[o](n.repeat(Math.floor(u/2)),(i?u+"% ":"")+l)),100==u&&console.log("")}}const n=require("cli-box");const r=require("chalk"),c=require("inquirer");require("child_process");const o=require("fs");function i(e){o.existsSync(e.projectName)&&(console.log(r.red(`file ${e.projectName} already existï¼ï¼ï¼`)),process.exit());let s=e.type.split("+");e.type=s.shift();let c,i=0,a=new t;var l;c=setInterval((()=>{a.run(i++),50==i&&clearInterval(c)}),100),console.log(r.green((l=e,new n({w:50,h:10,stringify:!1,marks:{nw:"â•­",n:"â”€",ne:"â•®",e:"â”‚",se:"â•¯",s:"â”€",sw:"â•°",w:"â”‚"},hAlign:"center",vAlign:"center"},`\n    Create Project Success!ðŸ˜\n    cd ${l.projectName}\n   \n   `)).stringify()))}const a={params:"[project-name]",description:"create a new project",action:e=>{let s=i;e?s(e):c.prompt([{type:"input",message:"é¡¹ç›®åç§°:",name:"projectName",validate:e=>e&&e.trim()?!e.includes(" ")||r.red("é¡¹ç›®åä¸èƒ½åŒ…å«ç©ºæ ¼ï¼Œè¯·é‡æ–°è¾“å…¥"):r.red("é¡¹ç›®åä¸èƒ½ä¸ºç©ºï¼Œè¯·é‡æ–°è¾“å…¥")},{type:"list",message:"è¯·é€‰æ‹©ä½ éœ€è¦åˆ›å»ºçš„æ¨¡ç‰ˆ",name:"lang",choices:["react","vue","weapp"]},{type:"list",message:"è¯·é€‰æ‹©ä½ éœ€è¦åˆ›å»ºçš„æ¨¡ç‰ˆ",name:"type",when:e=>"weapp"===e.lang,choices:["ts","ts+less","ts+scss","js","js+less","js+scss"]},{type:"list",when:e=>"Vue"===e.lang,message:"è¯·é€‰æ‹©ä½ éœ€è¦åˆ›å»ºçš„é¡¹ç›®ç±»åž‹",name:"type",choices:["Vue-ssr","Vue-h5"]},{type:"list",when:e=>"react"===e.lang,message:"è¯·é€‰æ‹©ä½ éœ€è¦åˆ›å»ºçš„é¡¹ç›®ç±»åž‹",name:"type",choices:["pc","mini","h5"]}]).then((e=>{s(e)}))}},l=require("chalk");let p={create:a,version:{params:"[package-version]",description:"package version",action:()=>{console.log(l.green("1.0.1"))}}};const{Command:u}=require("commander"),m=new u;Reflect.ownKeys(p).map((e=>{const{params:s,action:t,description:n}=p[e]||{};m.command(`${e} ${s||""}`).description(n).action((e=>{"function"==typeof t&&t(e)}))})),m.parse(process.argv);
